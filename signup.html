<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Node.js菜鳥筆記(3)</title>
        <!--<link rel="stylesheet" href="/css/style.css" type="text/css" media="all" />-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

</head>

<body>


        <h1>Node.js菜鳥筆記-註冊(用Ajax)</h1>
        <div id="signup">
                <label>使用者名稱：</label><input type="text" id="username" name="username" /><br>
                <label>電子郵件：</label><input type="text" id="email" name="email" /><br>
                <input type="submit" value="註冊我的帳號" /><br>
        </div>


</body>
<script type="text/javascript">
        $('#signup input[type="submit"]').click(function () {
                var params = {
                        username: $("#username").val(),
                        email: $("#email").val()
                }
        });

        $.ajax({
                data: params,
                url: 'http://localhost:8080/',
                dataType: 'json',
                cache: false,
                timeout: 5000,
                success: function (data) {
                        var data = $.parseJSON(data);
                        alert(data.message);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                        alert('error ' + textStatus + " " +
                                errorThrown);
                }
        });

        /* $(function () {
                 $('#signup input[type="submit"]').click(function (e) {
                         e.preventDefault();
                         var user = {};
                         user.username = $("#username").val();
                         user.email = $("#email").val();
                         $.post("/Signup", user, function (data) {
                                 greet(data)
                         });
                 });

                 var greet = function (msg) {
                         $('#signup').html("");
                         var greeting = $('<h2>Hi,' + msg.username + ',你的會員id是:' + msg
                                 .id + '我們會將會員啟動信寄至' + msg.email + '</h2>');
                         $('#signup').append(greeting);
                 };
         });*/
</script>